<!doctype html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" sizes="192x192" href="{{ app.router.static.url(filename='img/ant_army_logo_2.png') }}" />
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />-->
    <link rel="stylesheet" href="{{ app.router.static.url(filename='node_modules/spectre.css/dist/spectre.min.css') }}" />
    <link rel="stylesheet" href="{{ app.router.static.url(filename='node_modules/font-awesome/css/font-awesome.min.css') }}" />
    <link rel="stylesheet" href="{{ app.router.static.url(filename='css/army-ant.css') }}" />
    <title>{{ query }} {% if query %} - {% endif %} Army ANT</title>
  </head>
  <body>
    <div class="container grid-960">
      <div class="columns">
        <div class="column col-2">
          <img class="logo" src="{{ app.router.static.url(filename='img/ant_army_logo_2.svg') }}">
        </div>
        <div class="column col-10">
          <h1 class="header">
            Army ANT
            <small>
              The altruistic ant
              <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4320217/" target="_blank">
                <i class="fa fa-link"></i>
              </a>
            </small>
          </h1>
        </div>
      </div>

      <form class="form-horizontal">
        <div class="form-group">
          <div class="column col-6">
            <!-- form input control -->
            <div class="input-group">
              <input class="form-input input-lg" type="text" id="query" name="query" placeholder="Search" value="{{ query if query }}" />
              <button class="btn btn-primary btn-lg input-group-btn">Search</button>
            </div>
          </div>

          <div class="column col-3">
            <!-- form radio control -->
            <select class="form-select select-lg" id="engine" name="engine">
              <option value="gow" {% if engine == 'gow' %} selected="selected" {% endif %}>Graph of Word</option>
              <option value="goe" {% if engine == 'goe' %} selected="selected" {% endif %}>Graph of Entity</option>
            </select>
          </div>

          <div class="column col-2">
            <!-- form switch control -->
            <label class="form-switch">
              <input type="checkbox" id="debug" name="debug" {% if debug == 'on' %} checked="checked" {% endif %}/>
              <i class="form-icon"></i> Debug
            </label>
          </div>
        </div>
      </form>

      {% if results|length > 0 %}

      <table class="table table-striped table-hover">
        <thead>
          <tr>
            {% if debug == 'on' %}
            
            <th>Score</th>
            <th>Document</th>

            {% else %}
            
            {% if metadata|length > 0 %}

            <th>Image</th>

            {% endif %}
            
            <th>Document</th>

            {% endif %}
          </tr>
        </thead>
        <tbody>
          {% for result in results %}

          {% if debug == 'on' %}
          
          <tr>
            <td class="text-right"> {{ '%.2f' % result.score|float }} </td>
            <td> <a href="{{ result.docID }}" target="_blank">{{ result.docID }}</a> </td>
          </tr>
          
          {% else %}

          <tr>
            <td> <img class="image" src="{{ metadata[result.docID].img_url }}" /> </td>
            <td> <a href="{{ metadata[result.docID].url }}" target="_blank">{{ metadata[result.docID].name }}</a> </td>
          </tr>

          {% endif %}

          {% endfor %}
        </tbody>
      </table>

      {% elif error %}

      <div class="toast toast-danger message">
        <b>Error:</b> {{ error }}
      </div>

      {% else %}

      {% if query %}
      <h3 class="message">
        No results found.
      </h3>
      {% else %}
      <h3 class="message">
        Please insert a query in order to search for people in Wikipedia.
        <small>You can also select a different search engine or enable/disable debug mode.</small>
      </h3>
      {% endif %}

      {% endif %}
    </div>
  </body>
</html>
